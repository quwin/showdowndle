(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function Z(e){return e.includes("f")?{smogonName:"NidoranF",pokeApiName:"nidoran-f"}:{smogonName:"NidoranM",pokeApiName:"nidoran-m"}}function Q(e){return e.includes("wellspring")?{smogonName:"ogerpon-wellspring",pokeApiName:"ogerpon-wellspring-mask"}:e.includes("hearthflame")?{smogonName:"ogerpon-hearthflame",pokeApiName:"ogerpon-hearthflame-mask"}:e.includes("cornerstone")?{smogonName:"ogerpon-cornerstone",pokeApiName:"ogerpon-cornerstone-mask"}:{smogonName:"ogerpon",pokeApiName:"ogerpon"}}function ee(e){return e.includes("pom-pom")||e.includes("pom pom")?{smogonName:"oricorio-pom-pom",pokeApiName:"oricorio-pom-pom"}:e.includes("pau")||e.includes("pa'u")?{smogonName:"oricorio-pa'u",pokeApiName:"oricorio-pau"}:e.includes("sensu")?{smogonName:"oricorio-sensu",pokeApiName:"oricorio-sensu"}:{smogonName:"oricorio",pokeApiName:"oricorio-baile"}}function ne(e){return e.includes("aqua")?{smogonName:"tauros-paldea-aqua",pokeApiName:"tauros-paldea-aqua-breed"}:e.includes("blaze")?{smogonName:"tauros-paldea-blaze",pokeApiName:"tauros-paldea-blaze-breed"}:{smogonName:"tauros-paldea-combat",pokeApiName:"tauros-paldea-combat-breed"}}function te(e){return e.includes("sky")?{smogonName:"shaymin-sky",pokeApiName:"shaymin-sky"}:{smogonName:"shaymin",pokeApiName:"shaymin-land"}}function re(){return{smogonName:"basculin",pokeApiName:"basculin-red-striped"}}function C(e,n){return e.includes("f")?{smogonName:n+"-f",pokeApiName:n+"-female"}:{smogonName:n,pokeApiName:n+"-male"}}function oe(e){return e.includes("galar")?{smogonName:"darmanitan-galar",pokeApiName:"darmanitan-galar-standard"}:{smogonName:"darmanitan",pokeApiName:"darmanitan-standard"}}function v(e,n){const t=["tornadus","thundurus","landorus","enamorus"];return e.includes(" t")||e.includes("-t")?{smogonName:t[n]+"-therian",pokeApiName:t[n]+"-therian"}:{smogonName:t[n],pokeApiName:t[n]+"-incarnate"}}function ie(){return{smogonName:"meloetta",pokeApiName:"meloetta-aria"}}function se(){return{smogonName:"aegislash",pokeApiName:"aegislash-shield"}}function H(e,n){const t=["pumpkaboo","gourgeist"];return e.includes("small")?{smogonName:t[n]+"-small",pokeApiName:t[n]+"-small"}:e.includes("large")?{smogonName:t[n]+"-large",pokeApiName:t[n]+"-large"}:e.includes("super")||e.includes("jumbo")?{smogonName:t[n]+"-super",pokeApiName:t[n]+"-super"}:{smogonName:t[n],pokeApiName:t[n]+"-average"}}function ae(e){return e.includes("10")?{smogonName:"zygarde-10%",pokeApiName:"zygarde-10"}:{smogonName:"zygarde",pokeApiName:"zygarde-50"}}function le(e){return e.includes("midnight")?{smogonName:"lycanroc-midnight",pokeApiName:"lycanroc-midnight"}:e.includes("dusk")?{smogonName:"lycanroc-dusk",pokeApiName:"lycanroc-dusk"}:{smogonName:"lycanroc",pokeApiName:"lycanroc-midday"}}function ce(){return{smogonName:"wishiwashi",pokeApiName:"wishiwashi-solo"}}function ue(){return{smogonName:"minior",pokeApiName:"minior-red"}}function de(){return{smogonName:"mimikyu",pokeApiName:"mimikyu-disguised"}}function O(e){const n=["-dawn","-dusk"],t=["-wings","-mane"];return{smogonName:"necrozma"+n[e]+t[e],pokeApiName:"necrozma"+n[e]}}function me(){return{smogonName:"toxtricity",pokeApiName:"toxtricity-amped"}}function pe(){return{smogonName:"eiscue",pokeApiName:"eiscue-ice"}}function fe(){return{smogonName:"morpeko",pokeApiName:"morpeko-full-belly"}}function ge(e){return e.includes("rapid")?{smogonName:"urshifu-rapid-strike",pokeApiName:"urshifu-rapid-strike"}:{smogonName:"urshifu",pokeApiName:"urshifu-single-strike"}}function Ne(){return{smogonName:"maushold",pokeApiName:"maushold-family-of-four"}}function he(){return{smogonName:"squawkabilly",pokeApiName:"squawkabilly-green-plumage"}}function ye(){return{smogonName:"palafin",pokeApiName:"palafin-hero"}}function ke(){return{smogonName:"tatsugiri",pokeApiName:"tatsugiri-curly"}}function Ae(){return{smogonName:"dudunsparce",pokeApiName:"dudunsparce-two-segment"}}function be(){return{smogonName:"terapagos",pokeApiName:"terapagos-terastal"}}function we(){return{smogonName:"keldeo",pokeApiName:"keldeo-ordinary"}}function Ce(e){return e.includes("galar")?{smogonName:"mr. mime-galar",pokeApiName:"mr-mime-galar"}:{smogonName:"mr. mime",pokeApiName:"mr-mime"}}function ve(){return{smogonName:"mr. rime",pokeApiName:"mr-rime"}}function Ee(){return{smogonName:"mime jr.",pokeApiName:"mime-jr"}}function Se(e){return e.includes("galar")?{smogonName:"farfetch'd-galar",pokeApiName:"farfetchd-galar"}:{smogonName:"farfetch'd",pokeApiName:"farfetchd"}}function Te(){return{smogonName:"sirfetch'd",pokeApiName:"sirfetchd"}}function Le(){return{smogonName:"type: null",pokeApiName:"type-null"}}function xe(e){const n=["mega ","mega-"," mega","-mega"];for(const t of n)if(e.includes(t))return t;return null}function E(e,n){const t=["alola","galar","hisui","paldea"],o=["alolan","galarian","hisuian","paldean"];return e.includes(o[n])&&e.length==o[n].length||e.includes(t[n])&&e.length==t[n].length?{smogonName:e,pokeApiName:e}:e.includes(o[n])?e.indexOf(o[n])===0?{smogonName:e.slice(o[n].length+1)+"-"+t[n],pokeApiName:e.slice(o[n].length+1)+"-"+t[n]}:{smogonName:e.slice(0,e.length-o[n].length-1)+"-"+t[n],pokeApiName:e.slice(0,e.length-o[n].length-1)+"-"+t[n]}:e.indexOf(t[n])===0?{smogonName:e.slice(t[n].length+1)+"-"+t[n],pokeApiName:e.slice(t[n].length+1)+"-"+t[n]}:{smogonName:e.replaceAll(" ","-"),pokeApiName:e.replaceAll(" ","-")}}function Me(e){return!!(e.includes("ho")&&e.includes("oh")||e.includes("porygon")&&e.includes("z")||e.includes("wo")&&e.includes("chien")||e.includes("chi")&&e.includes("yu")||e.includes("chien")&&e.includes("pao")||e.includes("ting")&&e.includes("lu")||e.includes("deoxys")||e.includes("kyurem")||e.includes("zamazenta")||e.includes("zacian")||e.includes("arceus")||e.includes("silvally")||e.includes("ursaluna")||e.includes("giratina")||e.includes("dialga")||e.includes("palkia")||e.includes("rotom")||e.includes("kommo")||e.includes("hakamo")||e.includes("jangmo")||e.includes("calyrex"))}function Pe(e){return!!(e.includes("great")&&e.includes("tusk")||e.includes("scream")&&e.includes("tail")||e.includes("brute")&&e.includes("bonnet")||e.includes("flutter")&&e.includes("mane")||e.includes("slither")&&e.includes("wing")||e.includes("sandy")&&e.includes("shocks")||e.includes("roaring")&&e.includes("moon")||e.includes("walking")&&e.includes("wake")||e.includes("gouging")&&e.includes("fire")||e.includes("raging")&&e.includes("bolt")||e.includes("iron")||e.includes("tapu"))}function x(e,n){return e.includes("x")?{smogonName:n+"-mega-x",pokeApiName:n+"-mega-x"}:{smogonName:n+"-mega-y",pokeApiName:n+"-mega-y"}}function M(e,n){return e.includes("z")?{smogonName:n+"-mega-z",pokeApiName:n+"-mega-z"}:{smogonName:n+"-mega",pokeApiName:n+"-mega"}}function $e(e,n){return e.includes("charizard")?x(e,"charizard"):e.includes("mewtwo")?x(e,"mewtwo"):e.includes("raichu")?x(e,"raichu"):e.includes("absol")?M(e,"absol"):e.includes("garchomp")?M(e,"garchomp"):e.includes("lucario")?M(e,"lucario"):n==="mega "||n==="mega-"?{smogonName:e.slice(n.length)+"-mega",pokeApiName:e.slice(n.length)+"-mega"}:{smogonName:e.slice(0,e.length-n.length)+"-mega",pokeApiName:e.slice(0,e.length-n.length)+"-mega"}}function Be(e){const n=e.toLowerCase().trim(),t=n;if(n.includes("nidoran"))return Z(n);if(n.includes("ogerpon"))return Q(n);if(n.includes("oricorio"))return ee(n);if(n.includes("tauros")&&n.includes("paldea"))return ne(n);if(n.includes("shaymin"))return te(n);if(n.includes("basculin"))return re();if(n.includes("basculegion"))return C(n,"basculegion");if(n.includes("darmanitan"))return oe(n);if(n.includes("tornadus"))return v(n,0);if(n.includes("thundurus"))return v(n,1);if(n.includes("landorus"))return v(n,2);if(n.includes("enamorus"))return v(n,3);if(n.includes("meloetta"))return ie();if(n.includes("meowstic")&&!n.includes("mega"))return C(n,"meowstic");if(n.includes("aegislash"))return se();if(n.includes("pumpkaboo"))return H(n,0);if(n.includes("gourgeist"))return H(n,1);if(n.includes("zygarde")&&!n.includes("mega"))return ae(n);if(n.includes("lycanroc"))return le(n);if(n.includes("wishiwashi"))return ce();if(n.includes("minior"))return ue();if(n.includes("mimikyu"))return de();if(n.includes("necrozma")&&n.includes("dawn"))return O(0);if(n.includes("necrozma")&&n.includes("dusk"))return O(1);if(n.includes("toxtricity"))return me();if(n.includes("eiscue"))return pe();if(n.includes("indeedee"))return C(n,"indeedee");if(n.includes("morpeko"))return fe();if(n.includes("urshifu"))return ge(n);if(n.includes("maushold"))return Ne();if(n.includes("oinkologne"))return C(n,"oinkologne");if(n.includes("squawkabilly"))return he();if(n.includes("palafin"))return ye();if(n.includes("tatsugiri"))return ke();if(n.includes("dudunsparce"))return Ae();if(n.includes("terapagos"))return be();if(n.includes("keldeo"))return we();if(n.includes("mr")&&n.includes("mime"))return Ce(n);if(n.includes("mr")&&n.includes("rime"))return ve();if(n.includes("jr")&&n.includes("mime"))return Ee();if(n.includes("farfetch"))return Se(n);if(n.includes("sirfetch"))return Te();if(n.includes("type")&&n.includes("null"))return Le();if(n.includes("alola"))return E(n,0);if(n.includes("galar"))return E(n,1);if(n.includes("hisui"))return E(n,2);if(n.includes("paldea"))return E(n,3);if(Me(n))return{smogonName:n.replace(" ","-"),pokeApiName:n};if(Pe(n))return{smogonName:n.replace("-"," "),pokeApiName:n};const o=xe(n);return o?$e(n,o):{smogonName:n,pokeApiName:t}}function Ie(e){e=e.toLowerCase();let n=e;return e.includes("'")?n=n.replace("'",""):e.includes(".")?n=n.replace(".",""):e.includes("%")?n=n.replace("%",""):e.includes(":")?n=n.replace(":",""):e==="ogerpon"?n+="-teal":e==="terapagos"?n+="-terastal":(e==="oricorio-pom-pom"||e==="ho-oh"||e==="porygon-z"||e.includes("tauros-paldea")||e.includes("mega-")||e.includes("dusk-mane")||e.includes("dawn-wings"))&&(n=n.replace(/-(?!.*-)/,"")),n.replace(" ","")}const B="/api/";async function Re(e,n){const t=await fetch(`${B}metagame-data/${e}/${n}`);if(!t.ok)throw new Error(`Server error (${t.status})`);return await t.json()}async function ze(e,n,t){const o=await fetch(`${B}tier-pokemon/${e}/${n}`,{method:"POST",body:JSON.stringify({tierData:t}),headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error(`Server error (${o.status})`);return await o.json()}async function He(e){const n=Ie(e),t=await fetch(`${B}sprite/${n}`);if(!t.ok)throw new Error(`Server error (${t.status})`);return await t.blob()}const Oe=/(\S+)|(.)/g,Ue=/[\.#][\p{L}\p{N}]/u,_e=new RegExp("\\p{Ll}(?=[\\p{Lu}])","u"),je=/[\p{L}\p{N}]+/gu,De=new RegExp("^([^\\p{L}])*(?:\\p{L}\\.){2,}([^\\p{L}])*$","u"),Fe=new Set(["—","–","-","―","/"]),W=new Set([".","!","?"]),qe=new Set([...W,":",'"',"'","”"]),We=new Set(["a","an","and","as","at","because","but","by","en","for","if","in","neither","nor","of","on","only","or","over","per","so","some","than","that","the","to","up","upon","v","versus","via","vs","when","with","without","yet"]);function $(e,n={}){const{locale:t=void 0,sentenceCase:o=!1,sentenceTerminators:r=W,titleTerminators:i=qe,smallWords:s=We,wordSeparators:c=Fe}=typeof n=="string"||Array.isArray(n)?{locale:n}:n,d=o?r:i;let h="",m=!0;for(const V of e.matchAll(Oe)){const{1:a,2:R,index:X=0}=V;if(R){h+=R;continue}if(Ue.test(a)){const p=a.match(De);if(p){const[b,y="",f=""]=p;h+=o&&!m?a:U(a,y.length,t),m=d.has(f.charAt(0));continue}h+=a,m=d.has(a.charAt(a.length-1))}else{const p=Array.from(a.matchAll(je));let b=a,y=!1;for(let f=0;f<p.length;f++){const{0:w,index:L=0}=p[f],z=a.charAt(L+w.length);if(y=d.has(z),m)m=!1;else{if(o||_e.test(w))continue;if(p.length===1){if(s.has(w)&&!(X+a.length===e.length)&&!y)continue}else if(f>0&&(!c.has(a.charAt(L-1))||s.has(w)&&c.has(z)))continue}b=U(b,L,t)}h+=b,m=y||d.has(a.charAt(a.length-1))}}return h}function U(e,n,t){return e.slice(0,n)+e.charAt(n).toLocaleUpperCase(t)+e.slice(n+1)}var K=(e=>(e.HP="HP",e.ATK="Attack",e.DEF="Defense",e.SPA="Special-Attack",e.SPD="Special-Defense",e.SPE="Speed",e))(K||{}),u=(e=>(e[e.FALSE=0]="FALSE",e[e.PARTIAL=1]="PARTIAL",e[e.TRUE=2]="TRUE",e))(u||{});const A="https://pokeapi.co/api/v2/";async function Ke(e){let n=await fetch(`${A}pokemon/${e}`);if(!n.ok){const o=await fetch(`${A}pokemon-form/${e}`);if(o.ok){const r=await o.json();n=await fetch(`${A}pokemon/${r.pokemon.name}`)}else throw new Error(`Pokemon "${e}" not found`)}return(await n.json()).stats.map(o=>o.base_stat)}async function Ge(e){let n=await fetch(`${A}pokemon/${e}`);if(!n.ok){const r=await fetch(`${A}pokemon-form/${e}`);if(r.ok)n=r;else throw new Error(`Pokemon "${e}" not found`)}const o=(await n.json()).types.map(r=>r.type.name);return o.length===1&&o.push("none"),o}function Ye(e,n){return e[n]?e[n].usage:0}async function G(e,n){const t=Be(n),o=$(t.smogonName),r=t.pokeApiName.replaceAll(" ","-"),i=await Ke(r);return{name:o,usage:Ye(e,o),types:await Ge(r),bst:i.reduce((s,c)=>s+c,0),highestStat:Object.values(K)[i.indexOf(Math.max(...i))]}}function Je(e,n){let t;n.types[0]===e.types[0]?t=u.TRUE:n.types[0]===e.types[1]?t=u.PARTIAL:t=u.FALSE;let o;return n.types[1]===e.types[1]?o=u.TRUE:n.types[1]===e.types[0]?o=u.PARTIAL:o=u.FALSE,{name:n.name===e.name,usage:n.usage-e.usage,type1:t,type2:o,bst:n.bst-e.bst,highestStat:n.highestStat===e.highestStat}}let S=null,P=[],T,Y=0;const l=document.getElementById("gameStart"),k=document.getElementById("format"),g=document.getElementById("guessBox"),N=document.getElementById("guessSubmitButton"),_=document.getElementById("guessContainer"),Ve=document.getElementById("formatSelectMenu"),Xe=document.getElementById("guessWrapper"),j=document.getElementById("invalidError"),Ze=document.getElementById("instructButton"),Qe=document.getElementById("clarifyButton"),en=document.getElementById("creditButton");function D(e,n,t,o){const r=document.createElement("div");return r.className=t,r.innerHTML=e,n?r.style.backgroundColor="#acd8a7":r.style.backgroundColor="#ffffffff",o&&(r.innerHTML=o+"<br>"+r.innerHTML),r}function F(e,n,t,o,r){const i=document.createElement("div");return i.className=o,i.innerHTML=`${e}`,n>0?i.textContent+="⬇":n<0&&(i.textContent+="⬆"),n===0?i.style.backgroundColor="#acd8a7":Math.abs(n)<=t?i.style.backgroundColor="#fde992":i.style.backgroundColor="#ffffffff",r&&(i.innerHTML=r+"<br>"+i.innerHTML),i}function q(e,n,t,o){const r=document.createElement("div");return r.className=t,r.innerHTML=e,n===u.TRUE?r.style.backgroundColor="#acd8a7":n===u.PARTIAL?r.style.backgroundColor="#fde992":r.style.backgroundColor="#ffffffff",r}async function nn(e,n){const t=document.createElement("div");t.className="guesscard";const o=document.createElement("div");o.className="col left";const r=document.createElement("img");try{r.src=URL.createObjectURL(await He(e.name)),o.appendChild(r)}catch(d){console.log(d)}const i=document.createElement("div");i.className="col middle",i.appendChild(D(e.name,n.name,"box small","Pokémon:")),i.appendChild(F(parseFloat((e.usage*100).toFixed(2)),n.usage,.025,"box large","Usage (%):"));const s=document.createElement("div");s.className="col right";const c=document.createElement("div");return c.className="row",c.appendChild(q($(e.types[0]),n.type1,"box small half")),c.appendChild(q($(e.types[1]),n.type2,"box small half")),s.appendChild(c),s.appendChild(F(e.bst,n.bst,25,"box small","Base Stat Total:")),s.appendChild(D(e.highestStat,n.highestStat,"box small","Highest Stat:")),t.appendChild(o),t.appendChild(i),t.appendChild(s),t}async function tn(e){const n=await fetch(`/text/${e}.txt`);if(!n.ok)throw new Error(`Failed to fetch ${e}.txt`);return await n.text()}async function J(e){const n=document.createElement("div");n.className="overlay",n.id="overlayPopup";const t=document.createElement("div");t.className="popup",n.appendChild(t);const o=document.createElement("p");o.innerHTML=e,t.appendChild(o);const r=document.createElement("button");r.className="big button",r.innerHTML="Close",r.id="popupCloseButton",r.addEventListener("click",()=>{n.remove()}),t.appendChild(r),document.body.appendChild(n)}async function I(e){try{const n=await tn(e);J(n)}catch(n){console.log(n)}}async function rn(){let e="<strong>Congragulations!</strong>";e+="<br> <br>",e+=`You got ${T.name} in ${Y} guesses.`,J(e)}l.addEventListener("click",async()=>{l.disabled=!0,k.disabled=!0;const e=l.innerHTML;l.innerHTML="Generating...";const n=k.value,t=parseInt(n[0]),o=n.slice(1);try{S=await Re(t,o)}catch(i){console.log(`Error: ${i.message}.`),l.disabled=!1,k.disabled=!1,l.innerHTML=e;return}try{P=await ze(t,o,S)}catch(i){console.log(`Error: ${i.message}.`),l.disabled=!1,k.disabled=!1,l.innerHTML=e;return}const r=P[Math.floor(Math.random()*P.length)];try{T=await G(S,r)}catch(i){console.log(`Error: ${i.message}.`),l.disabled=!1,k.disabled=!1,l.innerHTML=e;return}l.disabled=!1,l.innerHTML=e,Ve.remove(),Xe.style.display="block"});N.addEventListener("click",async()=>{N.disabled=!0,g.disabled=!0,j.style.display="none";const e=g.value;if(!T){N.disabled=!1,g.disabled=!1;return}let n=null;try{n=await G(S,e),Y++;const t=Je(T,n);if(_.style.display="inline",_.prepend(await nn(n,t)),t.name===!0){rn(),N.disabled=!0,g.disabled=!0;return}}catch(t){j.style.display="inline",console.log(`Error: ${t.message}.`)}N.disabled=!1,g.disabled=!1});g.addEventListener("keydown",function(e){e.key==="Enter"&&(e.preventDefault(),N.click())});Ze.addEventListener("click",async()=>{I("instruction")});Qe.addEventListener("click",async()=>{I("clarification")});en.addEventListener("click",async()=>{I("credits")});
